#include <stdio.h>
#include <windows.h>
#include <conio.h>
#include <stdbool.h>
#define H 27
#define W 29
void pos(int,int);
void creatMap(void);
void move(char);
int judge(void);
char map[H][W]={
{'-'},
{'-'},
{'-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ',' ',' ',' ',' ','1',' ','1',' ',' ',' ',' ',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1','1','1',' ','1',' ','1',' ','1','1','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ',' ',' ','1',' ','1',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1','1','1','1','1',' ','1',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ',' ',' ','1',' ','1',' ',' ',' ','1',' ',' ',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ','1','1','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{'1',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ',' ',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ',' ',' ','1',' ','1',' ','1','1','1',' ','1','1','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ',' ',' ','1',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1',' ',' ',' ','1',' ','1',' ','1',' ','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ','1','1','1','1','1',' ','1',' ','1','1','1',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1',' ',' ',' ',' ',' ',' ',' ','1',' ',' ',' ',' ',' ','1',' ','1','-'},
{' ',' ',' ',' ',' ',' ',' ',' ','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','3','1','-'}
};
int coor[2]={4,18};
int main(void){
	creatMap();
	while(1)
	{
		move(getch());	
		if(judge())
			break;
	}
	return 0;
}
void pos(int row,int rank){
	COORD position;
	HANDLE hOutput;
	position.X=rank;
	position.Y=row;
	hOutput=GetStdHandle(STD_OUTPUT_HANDLE);
	SetConsoleCursorPosition(hOutput,position);
}
void creatMap()
{
    int i,j;
    system("cls");
    for(j=0;j<H;j++)
	{
		for(i=0;i<W;i++)
    	{
    		pos(j,2*i);
    		switch(map[j][i])
			{
    		case '1':
        		printf("¡ö");
        		break;
        	case '0':
        	case ' ':
        		printf("  ");
        		break;
        	case '2':
        		printf("¡õ");
        		break;
			case '3':
        		printf("¡Á");
        		break;
        	case '-':
        		i=0;
        		j++;
        		break;
        	default:
        		break;
        	}	
        	
    	}
	}
	pos(coor[0],coor[1]);
	printf("¡â");
}
void loadMap(){
	
	
}
void move(char order){
	pos(coor[0],coor[1]);
	printf("  ");
	
	switch(order){
		case 'w':
			if(coor[0]>0&&map[coor[0]-1][coor[1]/2]!='1')
				coor[0]--;
			break;
		case 's':
			if(coor[0]<26&&map[coor[0]+1][coor[1]/2]!='1')
				coor[0]++;
			break;
		case 'd':
			if(coor[1]<58&&map[coor[0]][coor[1]/2+1]!='1')
				coor[1]+=2;
			break;
		case 'a':
			if(coor[1]>0&&map[coor[0]][coor[1]/2-1]!='1')
				coor[1]-=2;
			break;			
	}
	pos(coor[0],coor[1]);
	printf("¡â");
}
int judge(){
	if(coor[0]==21&&coor[1]==46){
		pos(20,40);
		printf("you win!!!!!!!!!you win!!!!!!!you win!!!!!!");
		return 1;
	}
	return 0;
}

